<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="niceRAM"><meta name=description content="niceRAM's Blog"><link rel=prev href=https://niceram.xyz/2021/03/25/20210325_1319/><link rel=next href=https://niceram.xyz/2021/07/07/20210707_1441/><link rel=canonical href=https://niceram.xyz/2021/04/15/20210415_2157/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>Docker + Miniconda + VSCode Remote SSH åœ¨ Ubuntu æ­å»ºå¤šç‰ˆæœ¬å…±å­˜çš„ TensorFlow-GPU è¿œç¨‹å¼€å‘ç¯å¢ƒ | NiceBlog</title><meta name=title content="Docker + Miniconda + VSCode Remote SSH åœ¨ Ubuntu æ­å»ºå¤šç‰ˆæœ¬å…±å­˜çš„ TensorFlow-GPU è¿œç¨‹å¼€å‘ç¯å¢ƒ | NiceBlog"><link rel=stylesheet href=/css/main.min.css><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/font-ali/iconfont.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/niceram.xyz\/"},"articleSection":"posts","name":"Docker \u002b Miniconda \u002b VSCode Remote SSH åœ¨ Ubuntu æ­å»ºå¤šç‰ˆæœ¬å…±å­˜çš„ TensorFlow-GPU è¿œç¨‹å¼€å‘ç¯å¢ƒ","headline":"Docker \u002b Miniconda \u002b VSCode Remote SSH åœ¨ Ubuntu æ­å»ºå¤šç‰ˆæœ¬å…±å­˜çš„ TensorFlow-GPU è¿œç¨‹å¼€å‘ç¯å¢ƒ","description":"å·¥ä½œåŸå› ï¼Œéœ€è¦ç”¨åˆ° TensorFlow-GPUï¼Œ ä¹‹å‰ä¸€ç›´æ˜¯æœºå™¨è£…å¥½äº† Nvidia é©±åŠ¨ã€CUDAã€cudnn åç´§ç€ä¸€ä¸ª TensorFlow ç‰ˆæœ¬ä¸€ç›´ç”¨ï¼Œ æœ‰åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„éœ€æ±‚","inLanguage":"zh-CN","author":"niceRAM","creator":"niceRAM","publisher":"niceRAM","accountablePerson":"niceRAM","copyrightHolder":"niceRAM","copyrightYear":"2021","datePublished":"2021-04-15 21:58:06 \u002b0800 \u002b0800","dateModified":"2021-04-15 21:58:06 \u002b0800 \u002b0800","url":"https:\/\/niceram.xyz\/2021\/04\/15\/20210415_2157\/","wordCount":"4391","keywords":["docker","miniconda","anaconda","tensorflow","tensorflow-gpu","ubuntu","Nvidia","CUDA","cudnn","CUDA å¤šç‰ˆæœ¬å…±å­˜","NiceBlog"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://niceram.xyz/><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/posts/ title>ğŸ“šBlog</a>
<a class=menu-item href=/categories/ title>ğŸ“‚Categories</a>
<a class=menu-item href=/tags/ title>ğŸ“ŒTags</a>
<a class=menu-item href=/about/ title>ğŸ’¬About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://niceram.xyz/>NiceBlog</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/posts/ title><h3>ğŸ“šBlog</h3><div class=menu-active></div></a><a class=menu-item href=/categories/ title><h3>ğŸ“‚Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags/ title><h3>ğŸ“ŒTags</h3><div class=menu-active></div></a><a class=menu-item href=/about/ title><h3>ğŸ’¬About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Docker + Miniconda + VSCode Remote SSH åœ¨ Ubuntu æ­å»ºå¤šç‰ˆæœ¬å…±å­˜çš„ TensorFlow-GPU è¿œç¨‹å¼€å‘ç¯å¢ƒ</h1><div class=post-meta>Written by <a itemprop=name href=https://niceram.xyz/ rel=author>niceRAM</a> with â™¥
<span class=post-time>on <time datetime=2021-04-15 itemprop=datePublished>April 15, 2021</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=https://niceram.xyz/categories/%E6%87%92%E6%8E%A8%E5%8A%A8%E6%8A%80%E6%9C%AF%E8%BF%9B%E6%AD%A5/>æ‡’æ¨åŠ¨æŠ€æœ¯è¿›æ­¥,</a></span>
<span class=post-word-count>4391 words</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#èƒŒæ™¯>èƒŒæ™¯</a><ul><li><a href=#ä¸ºä»€ä¹ˆéœ€è¦å¤šç‰ˆæœ¬å…±å­˜>ä¸ºä»€ä¹ˆéœ€è¦å¤šç‰ˆæœ¬å…±å­˜</a></li><li><a href=#æ—¶ä¸‹çš„è§£å†³æ–¹æ¡ˆ>æ—¶ä¸‹çš„è§£å†³æ–¹æ¡ˆ</a></li><li><a href=#ç°æœ‰æ–¹æ¡ˆçš„ç¼ºé™·>ç°æœ‰æ–¹æ¡ˆçš„ç¼ºé™·</a></li><li><a href=#äº¿ç‚¹åºŸè¯>äº¿ç‚¹åºŸè¯</a></li></ul></li><li><a href=#äº‹å‰å‡†å¤‡>äº‹å‰å‡†å¤‡</a><ul><li><a href=#å®‰è£…-docker-engine>å®‰è£… Docker Engine</a></li><li><a href=#å®‰è£…-docker-compose>å®‰è£… Docker-Compose</a></li><li><a href=#å®‰è£…-nvidia-container-toolkit>å®‰è£… nvidia-container-toolkit</a></li><li><a href=#ä¸‹è½½-tensorflow-çš„-docker-é•œåƒ>ä¸‹è½½ TensorFlow çš„ Docker é•œåƒ</a></li></ul></li><li><a href=#éªšæ“ä½œçš„æ­£å¼å¼€å§‹>éªšæ“ä½œçš„æ­£å¼å¼€å§‹</a><ul><li><a href=#ç¼–å†™-dockerfile>ç¼–å†™ Dockerfile</a></li><li><a href=#dockerfile-éœ€è¦ç”¨åˆ°çš„è„šæœ¬>Dockerfile éœ€è¦ç”¨åˆ°çš„è„šæœ¬</a></li><li><a href=#æ‰“åŒ…é•œåƒ>æ‰“åŒ…é•œåƒ</a></li><li><a href=#æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</a></li><li><a href=#å®‰è£…-minicondaanaconda>å®‰è£… Miniconda/Anaconda</a></li><li><a href=#ä½¿ç”¨-docker-compose-ç®¡ç†å®¹å™¨>ä½¿ç”¨ Docker-Compose ç®¡ç†å®¹å™¨</a></li></ul></li><li><a href=#éªšæ“ä½œçš„åç»­è¡¥å……>éªšæ“ä½œçš„åç»­è¡¥å……</a><ul><li><a href=#ä¸ºå®¹å™¨åˆå§‹åŒ–-conda>ä¸ºå®¹å™¨åˆå§‹åŒ– conda</a></li><li><a href=#ç®€å•çš„ä½¿ç”¨è¯´æ˜>ç®€å•çš„ä½¿ç”¨è¯´æ˜</a></li><li><a href=#ä½¿ç”¨-vscode-è¿œç¨‹å¼€å‘>ä½¿ç”¨ VSCode è¿œç¨‹å¼€å‘</a></li></ul></li><li><a href=#ä¸€äº›å·²çŸ¥å­˜åœ¨ä½†ä»ä¸çŸ¥å¦‚ä½•è§£å†³çš„å°é—®é¢˜>ä¸€äº›å·²çŸ¥å­˜åœ¨ä½†ä»ä¸çŸ¥å¦‚ä½•è§£å†³çš„å°é—®é¢˜</a></li></ul></nav></div></div><div class=post-content><img src=https://cdn.jsdelivr.net/gh/niceRAM/blog-images/img/20210415_2157/2021/04/16/14-10-57-899-f0d5b7.png class=featured_image><p>å·¥ä½œåŸå› ï¼Œéœ€è¦ç”¨åˆ° TensorFlow-GPUï¼Œ
ä¹‹å‰ä¸€ç›´æ˜¯æœºå™¨è£…å¥½äº† Nvidia é©±åŠ¨ã€CUDAã€cudnn åç´§ç€ä¸€ä¸ª TensorFlow ç‰ˆæœ¬ä¸€ç›´ç”¨ï¼Œ
æœ‰åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„éœ€æ±‚å°±ç”¨ virtualenv æ–°å»ºä¸€ä¸ªç¯å¢ƒï¼Œå†è£…ä¸Š TensorFlow-GPU å’Œä¸€å †ä¾èµ–ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹è™½ç„¶æ“ä½œä¸éš¾ï¼Œä½†é‡å¤å·¥ä½œç€å®æ— èŠï¼Œè€Œä¸” virtualenv ç®¡ç†è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ–¹ä¾¿ï¼Œ
è€Œæ›´é‡è¦çš„æ˜¯<strong>è™šæ‹Ÿç¯å¢ƒå¹¶ä¸èƒ½è§£å†³åŒä¸€ OS ä¸Š TensorFlow å’Œ CUDA çš„å¤šç‰ˆæœ¬å…±å­˜é—®é¢˜</strong>ï¼</p><p>æœ€è¿‘ç»„å†…çš„æœåŠ¡å™¨é‡è£…ç³»ç»Ÿï¼Œåˆšå¥½æœ€è¿‘ä¹Ÿæ²¡é‚£ä¹ˆå¿™äº†ï¼Œç¯å¢ƒé‡å»ºä¹Ÿæ˜¯ç”±æˆ‘å¤„ç†ï¼Œ
å°±é¡ºæ‰‹å¤šå­¦ç‚¹å®¹å™¨æŠ€æœ¯ï¼Œè‡ªå·±ç¢ç£¨äº†ä¸€å¥—æ„Ÿè§‰ç”¨ç€æ¯”è¾ƒèˆ’æœçš„è§£å†³æ–¹æ¡ˆã€‚</p><hr><h2 id=èƒŒæ™¯>èƒŒæ™¯</h2><h3 id=ä¸ºä»€ä¹ˆéœ€è¦å¤šç‰ˆæœ¬å…±å­˜>ä¸ºä»€ä¹ˆéœ€è¦å¤šç‰ˆæœ¬å…±å­˜</h3><p>å®‰è£…çš„ TensorFlow ç‰ˆæœ¬ä¸åŒï¼Œæ‰€éœ€çš„ CUDA ç‰ˆæœ¬ä¹Ÿæœ‰å¯èƒ½ä¸ä¸€æ ·ï¼Œ
æ‰€ä»¥ä¸åŒé¡¹ç›®ä¾èµ–äº†ä¸åŒç‰ˆæœ¬çš„ TensorFlowï¼Œå°±å¯èƒ½éœ€è¦å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ CUDAã€‚</p><p>ä½†æ˜¯å› ä¸º CUDA çš„å®‰è£…ä¼šä¿®æ”¹è½¯é“¾æ¥ <code>/usr/local/cuda/</code> æŒ‡å‘çš„è·¯å¾„ï¼Œä¹Ÿå°±ä¼šæ”¹å˜äº†å½“å‰ç³»ç»Ÿçš„é»˜è®¤ CUDAã€‚
æ‰€ä»¥åœ¨æ²¡æœ‰äººä¸ºå¹²æ¶‰çš„æƒ…å†µä¸‹ï¼Œç³»ç»ŸåŒæ—¶åªèƒ½è¯†åˆ«åˆ°ä¸€ä¸ªç‰ˆæœ¬çš„ CUDAï¼Œä¹Ÿå°±æ˜¯æœ€åå®‰è£…çš„ CUDAã€‚</p><p>å› æ­¤ä¾èµ–å…¶ä»–ç‰ˆæœ¬ CUDA çš„ TensorFlow å°±æ— æ³•æ­£å¸¸ä½¿ç”¨ GPU äº†ã€‚</p><h3 id=æ—¶ä¸‹çš„è§£å†³æ–¹æ¡ˆ>æ—¶ä¸‹çš„è§£å†³æ–¹æ¡ˆ</h3><p>æ­¤å‰é‡åˆ° TensorFlow-GPU å…±å­˜çš„é—®é¢˜é€šå¸¸æœ‰è¿™å‡ ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p><ol><li>æŒ‰ç…§æ­£å¸¸æµç¨‹å®‰è£…éœ€è¦çš„ TensorFLow1/TensorFlow2 ä»¥åŠæ‰€æœ‰å¯¹åº”ç‰ˆæœ¬çš„ CUDAï¼Œ
é€šè¿‡è„šæœ¬åœ¨åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒæ—¶æŒ‡å®šè¦ä½¿ç”¨çš„ CUDAã€‚</li><li>ä¸è®ºæ˜¯ TensorFLow1 è¿˜æ˜¯ TensorFlow2ï¼Œå¤§ç‰ˆæœ¬å‡ ä¹æ²¡æœ‰ä¸å‘ä¸‹å…¼å®¹çš„æƒ…å†µï¼Œ
æ‰€ä»¥å°½é‡å®‰è£…é«˜ç‰ˆæœ¬çš„ TensorFlow1ï¼Œç„¶åæ ¹æ®å·²å®‰è£…çš„ TensorFlow1 ä¾èµ–çš„ CUDA ç‰ˆæœ¬ï¼Œ
åœ¨å…¶ä»–è™šæ‹Ÿç¯å¢ƒå®‰è£…åŒæ ·ä¾èµ–è¯¥ CUDA ç‰ˆæœ¬çš„ TensorFlow2ã€‚</li><li>ä½¿ç”¨ TensorFlow å®˜æ–¹æä¾›çš„ Docker é•œåƒã€‚</li></ol><h3 id=ç°æœ‰æ–¹æ¡ˆçš„ç¼ºé™·>ç°æœ‰æ–¹æ¡ˆçš„ç¼ºé™·</h3><ol><li>éœ€è¦å®‰è£…å¤šä¸ªCUDAã€å†™è„šæœ¬â€¦â€¦å…·ä½“æˆ‘æ²¡æœ‰æˆåŠŸå®æ–½è¿‡ï¼Œå•çº¯æ˜¯å®‰è£… CUDA å°±å› ä¸ºç½‘ç»œç­‰åŸå› å¤±è´¥å¤šæ¬¡ï¼Œ
å…·ä½“æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œä¸å¤ªå¥½è¯´ã€‚</li><li>ä¸€æ—¦é‡åˆ°éœ€è¦æ›´é«˜ç‰ˆæœ¬çš„ TensorFlow2 æˆ–è€… æ›´ä½ç‰ˆæœ¬çš„ TensorFlow1 çš„é¡¹ç›®ï¼Œè¿™ä¸ªæ–¹æ¡ˆå°±æ— æ³•åº”å¯¹ã€‚</li><li>è¿™é‡Œæˆ‘è®¤ä¸ºæœ€ç®€å•ã€æœ€åˆç†çš„æ–¹å¼æ˜¯ç¬¬ 3 ä¸ªã€‚ä½†æ˜¯ä»ç„¶å­˜åœ¨å±€é™æ€§ï¼š<ul><li>æ¯ä¸ªç¯å¢ƒç‹¬ç«‹çš„é¡¹ç›®éƒ½è¦æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼Œä¹Ÿå¯èƒ½éœ€è¦ä¸‹è½½å…¶ä»–ç‰ˆæœ¬ TensorFlow çš„é•œåƒï¼Œ
è€Œæ¯ä¸€ä¸ªé•œåƒéƒ½æœ‰ 3~4GB é‚£ä¹ˆå¤§ã€‚
(btwï¼Œé‡è£…ç³»ç»Ÿå‰ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨æ˜¯åŒç³»ç»Ÿçš„ï¼Œè€Œ Ubuntu çš„ä¸»åˆ†åŒºåªæœ‰ 200GB ä¸åˆ°ï¼Œåˆ«è¯´é•œåƒæ–‡ä»¶äº†ï¼Œ
å¹³æ—¶è®­ç»ƒä¸ª BERT å°±è¯¥æ¸…ç†æ—§çš„ checkpoint äº†ï¼Œæ‰€ä»¥å°½é‡å°‘çš„é•œåƒå’Œå®¹å™¨ï¼Œè®©å®¹å™¨èƒ½å¤Ÿå¤ç”¨å¯¹æˆ‘æ¥è¯´ç›¸å½“é‡è¦)</li><li>å¦‚æœæœ‰è¿œç¨‹å¼€å‘çš„éœ€æ±‚ï¼Œåˆ™éœ€è¦ç®¡ç†å¤šä¸ªå®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œå³ä½¿æ˜¯ä½¿ç”¨ Docker-Compose æˆ‘ä¹Ÿä¸è§‰å¾—æœ‰å¤šæ–¹ä¾¿ã€‚
æ›´ä½•å†µè¿˜è¦ä¸“é—¨è®°ä¸‹æ¯ä¸ªé¡¹ç›®ä½¿ç”¨çš„å®¹å™¨å¯¹åº”çš„ç«¯å£å·ã€‚</li></ul></li></ol><h3 id=äº¿ç‚¹åºŸè¯>äº¿ç‚¹åºŸè¯</h3><p>æ›¾ç»åœ¨ç½‘ç»œä¸Šæœè¿‡å¤šç‰ˆæœ¬å…±å­˜çš„é—®é¢˜ï¼Œç­”æ¡ˆä¸å¤šï¼Œèƒ½æ•°å¾—è¿‡æ¥çš„åŸºæœ¬éƒ½æ˜¯ç¬¬ä¸€ç§ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹å¼ã€‚
å½“æ—¶ç½‘ç»œä¸Šå¹¶æ²¡è§åˆ°æœ‰äººæåˆ°ç¬¬äºŒç§æ–¹å¼ï¼Œä¸è¿‡ç¬¬äºŒç§ä¹Ÿå¹¶ä¸æ˜¯æˆ‘æœ¬äººç›´æ¥æƒ³åˆ°çš„ã€‚
åªæ˜¯ä¸€æ¬¡å·§åˆï¼Œæˆ‘å‘ç°ä¸¤ä¸ª conda ç¯å¢ƒåˆ†åˆ«è£…äº† tensorflow-gpu-1.14 å’Œ tensorflow-gpu-2.1.0ï¼Œ
è€Œä¸”ä¸¤ä¸ªéƒ½èƒ½æ­£å¸¸ä½¿ç”¨ GPUï¼Œäºæ˜¯ä¸“é—¨æŸ¥äº†ä¸‹æ‰ç¡®è®¤è¿™ä¸¤ä¸ªç‰ˆæœ¬éƒ½æ˜¯æ”¯æŒæˆ‘ä»¬æœåŠ¡å™¨ä¸Šè£…ç€çš„ CUDA-10.0ã€‚</p><p>è™½è¯´æ˜¯å·§åˆï¼Œä½†ä¹Ÿç®—æ˜¯ä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆå§ï¼Œç¡®å®èƒ½ä¸€å®šç¨‹åº¦ä¸Šè§£å†³é—®é¢˜ï¼Œä¹Ÿé‚£ä¹ˆç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œ
ç›´åˆ°ç ”ç©¶ä¾èµ–äº† <code>TensorFlow-GPU>=2.4.0</code> çš„ <a href=https://github.com/google-research/text-to-text-transfer-transformer>text-to-text-transfer-transformer</a>ã€‚
å½“æ—¶ç”±äºæ—¶é—´å…³ç³»ï¼Œå°±ç®€å•äº†è§£äº† TensorFlow å®˜æ–¹æ–‡æ¡£ä¸Šé€šè¿‡ Docker ä½¿ç”¨ TensorFlow çš„æ–¹å¼ä¸´æ—¶æ­äº†ä¸ªç¯å¢ƒã€‚</p><p>æœ‰ä¸€è¯´ä¸€ï¼Œè™½ç„¶å› ä¸ºå…¬å¸ä¸¥æ ¼çš„ç½‘ç»œè§„åˆ™å¯¼è‡´å„ç§å„æ ·éº»çƒ¦çš„é—®é¢˜ï¼Œä»¥è‡³äºç¯å¢ƒæ­å»ºéå¸¸å›°éš¾ï¼Œ
ä½†åœ¨ç¯å¢ƒç‹¬ç«‹çš„å®¹å™¨æ ¹æœ¬ä¸ç”¨è€ƒè™‘å¤ªå¤šç¯å¢ƒã€åº“å†²çªç­‰é—®é¢˜ï¼Œè¿˜æ˜¯å¾ˆèˆ’æœçš„ã€‚</p><h2 id=äº‹å‰å‡†å¤‡>äº‹å‰å‡†å¤‡</h2><ol><li>é¦–å…ˆéœ€è¦ç¡®è®¤ä½ çš„æ˜¾å¡æ˜¯æ”¯æŒ CUDA çš„ NVIDIA æ˜¾å¡ï¼Œåœ¨ <a href=https://developer.nvidia.com/cuda-gpus>æ”¯æŒ CUDAÂ® çš„ GPU å¡</a> å¯ä»¥æŸ¥çœ‹</li><li>å®‰è£… <a href=https://www.nvidia.com/drivers>NVIDIAÂ® GPU é©±åŠ¨ç¨‹åº</a></li></ol><h3 id=å®‰è£…-docker-engine>å®‰è£… Docker Engine</h3><p>å‚ç…§ <a href=https://docs.docker.com/engine/install/>Install Docker Engine | Docker Documentation</a> æ“ä½œå³å¯</p><h3 id=å®‰è£…-docker-compose>å®‰è£… Docker-Compose</h3><p>Docker-Compose å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ç®¡ç†å¤šä¸ªå®¹å™¨ï¼Œéå¸¸æ¨èä½¿ç”¨ï¼</p><ol><li>ä¸‹è½½ Docker-Compose çš„äºŒè¿›åˆ¶æ–‡ä»¶</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>sudo curl -L <span class=s2>&#34;https://github.com/docker/compose/releases/download/1.29.1/docker-compose-</span><span class=k>$(</span>uname -s<span class=k>)</span><span class=s2>-</span><span class=k>$(</span>uname -m<span class=k>)</span><span class=s2>&#34;</span> -o /usr/local/bin/docker-compose
</code></pre></div><ol start=2><li>æ·»åŠ å¯æ‰§è¡Œæƒé™</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>sudo chmod +x /usr/local/bin/docker-compose
</code></pre></div><h3 id=å®‰è£…-nvidia-container-toolkit>å®‰è£… nvidia-container-toolkit</h3><p>è¦è®© TensorFlow èƒ½å¤Ÿåœ¨ Docker å®¹å™¨ä¸­ä½¿ç”¨ GPUï¼Œéœ€è¦åœ¨å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®š <code>--gpus</code> å‚æ•°,
è€Œè¿™ä¸ªå‚æ•°éœ€è¦æœ‰ nvidia-container-toolkit æ”¯æŒæ‰è¡Œã€‚</p><ol><li>è®¾ç½® Nvidia-Docker å®‰è£…æº</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span><span class=nv>distribution</span><span class=o>=</span><span class=k>$(</span>. /etc/os-release<span class=p>;</span><span class=nb>echo</span> <span class=nv>$ID$VERSION_ID</span><span class=k>)</span> <span class=se>\
</span><span class=ln>2</span><span class=se></span>    <span class=o>&amp;&amp;</span> wget --no-check-certificate -qO - https://nvidia.github.io/nvidia-docker/gpgkey <span class=p>|</span> sudo apt-key add - <span class=se>\
</span><span class=ln>3</span><span class=se></span>    <span class=o>&amp;&amp;</span> wget --no-check-certificate -qO - https://nvidia.github.io/nvidia-docker/<span class=nv>$distribution</span>/nvidia-docker.list <span class=p>|</span> sudo tee /etc/apt/sources.list.d/nvidia-docker.list
</code></pre></div><ol start=2><li>æ›´æ–°è½¯ä»¶æºå¹¶å®‰è£… nvidia-container-toolkit</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>sudo apt-get update <span class=o>&amp;&amp;</span> sudo apt-get install -y nvidia-container-toolkit
</code></pre></div><ol start=3><li>é‡å¯ Docker</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>sudo systemctl restart docker 
</code></pre></div><p>è¿™ä¸€æ­¥å•çœ‹ TensorFlow çš„æ–‡æ¡£æ˜¯çœ‹ä¸å‡ºè¿™ä¸€æ­¥çš„ï¼Œç”±äºæ²¡æœ‰ç»éªŒï¼Œå†åŠ ä¸Šå…¬å¸ç½‘ç»œå®‰å…¨çš„åŸå› ï¼Œ
æŠ˜è…¾äº†å¥½ä¹…ï¼Œæœ€ç»ˆç­”æ¡ˆå¯ä»¥å‚è€ƒ <a href=https://github.com/NVIDIA/nvidia-docker/issues/1296#issuecomment-646521766>è¿™ä¸ª Issue</a>ã€‚
è™½ç„¶æŒ‡ä»¤å’Œ issue é‡Œçš„æœ‰ç‚¹åŒºåˆ«ï¼Œå…¶å®å®‰è£…æ€è·¯åŸºæœ¬æ˜¯å›ºå®šçš„ã€‚</p><h4 id=çƒ¦äººçš„å‘>çƒ¦äººçš„å‘</h4><p>è¿™é‡Œä¹Ÿç®—æ˜¯ä¸ºäº†è‡ªå·±å§ï¼Œè®°å½•ä¸€ä¸‹å› ä¸ºç½‘ç»œè¸©åˆ°çš„å‘ï¼š
å…¬å¸ç”±äº Linux ç³»ç»Ÿæ— æ³•å®‰è£…å…¬å¸è¦æ±‚çš„è¯ä¹¦ï¼Œ<code>https://</code> é“¾æ¥å‡æ— æ³•æ­£å¸¸è®¿é—®ï¼Œå‚è€ƒä»¥ä¸‹å‡ ç§å¯¹ç­–ï¼š</p><ul><li>ä½¿ç”¨ <code>wget --no-check-certificate</code> ä¸‹è½½è¯ä¹¦</li><li>åœ¨ windows ä¸‹å¥½è¯ä¹¦å†æ‹·è´åˆ° linux æœºå™¨ä¸Šæ‰§è¡Œ <code>sudo apt-key</code></li><li>è®¾ç½®ä»£ç†ï¼Œæœ¬è´¨å…¶å®å’Œç¬¬äºŒä¸ªä¸€æ ·</li></ul><h3 id=ä¸‹è½½-tensorflow-çš„-docker-é•œåƒ>ä¸‹è½½ TensorFlow çš„ Docker é•œåƒ</h3><p>è¿™é‡Œä»¥ <code>tensorflow-gpu-1.15.5</code> å’Œ <code>tensorflow-gpu-latest</code> ä¸ºä¾‹ï¼š</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>docker pull tensorflow/tensorflow:1.15.5-gpu
<span class=ln>2</span>docker pull tensorflow/tensorflow:latest-gpu
</code></pre></div><h2 id=éªšæ“ä½œçš„æ­£å¼å¼€å§‹>éªšæ“ä½œçš„æ­£å¼å¼€å§‹</h2><h3 id=ç¼–å†™-dockerfile>ç¼–å†™ Dockerfile</h3><p>è‡ªå·±é‡åšé•œåƒä¸»è¦æ˜¯ä¸ºäº†ä»¥åé‡å»ºå®¹å™¨æ–¹ä¾¿ï¼ŒTensorFlow1 å’Œ TensorFlow2 éƒ½åšé•œåƒï¼Œ
å†…å®¹é™¤äº†ä½œæˆçš„é•œåƒåå’Œç«¯å£æ˜ å°„å¤–å®Œå…¨ä¸€è‡´ã€‚</p><div class=highlight><pre class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=ln> 1</span><span class=k>FROM</span><span class=s> tensorflow/tensorflow:1.15.5-gpu-py3</span><span class=err>
</span><span class=ln> 2</span><span class=err>
</span><span class=ln> 3</span><span class=err></span><span class=c># è¿™ä¸ªè„šæœ¬ä¸»è¦æ˜¯å®‰è£…è½¯ä»¶ï¼Œè¯¦è§ä¸‹æ–‡</span><span class=err>
</span><span class=ln> 4</span><span class=err></span><span class=k>COPY</span> ./init_env1.sh ./sources.list /<span class=err>
</span><span class=ln> 5</span><span class=err></span><span class=k>RUN</span> chmod u+x /init_env*.sh <span class=err>
</span><span class=ln> 6</span><span class=err></span><span class=k>RUN</span> /init_env1.sh<span class=err>
</span><span class=ln> 7</span><span class=err>
</span><span class=ln> 8</span><span class=err></span><span class=c># è¿™ä¸ªè„šæœ¬ä¸»è¦æ˜¯æ·»åŠ ç”¨æˆ·ã€è®¾ç½® ssh</span><span class=err>
</span><span class=ln> 9</span><span class=err></span><span class=k>COPY</span> ./init_env2.sh /<span class=err>
</span><span class=ln>10</span><span class=err></span><span class=k>RUN</span> chmod u+x /init_env*.sh <span class=err>
</span><span class=ln>11</span><span class=err></span><span class=k>RUN</span> /init_env2.sh<span class=err>
</span><span class=ln>12</span><span class=err>
</span><span class=ln>13</span><span class=err></span><span class=k>EXPOSE</span><span class=s> 22</span><span class=err>
</span><span class=ln>14</span><span class=err></span><span class=c># è®¾ç½®ä¸€ä¸ªæŒ‚è½½ç›®å½•ï¼Œå°†æ‰€æœ‰æ•°æ®æŒ‚è½½åˆ°å®¿ä¸»æœº</span><span class=err>
</span><span class=ln>15</span><span class=err></span><span class=k>VOLUME</span><span class=s> /AI</span><span class=err>
</span><span class=ln>16</span><span class=err></span><span class=k>WORKDIR</span><span class=s> /AI</span><span class=err>
</span><span class=ln>17</span><span class=err></span><span class=c># å°†é»˜è®¤ç”¨æˆ·ä¿®æ”¹ä¸ºæ–°å»ºçš„ç”¨æˆ·</span><span class=err>
</span><span class=ln>18</span><span class=err></span><span class=k>USER</span><span class=s> ai</span><span class=err>
</span></code></pre></div><p><em><strong>Note:</strong></em>
<em>Dockerfile çš„ç¼–å†™åº”<strong>å°½é‡é¿å…è¿‡å¤šçš„ä½¿ç”¨ COPY, RUN ç­‰æŒ‡ä»¤ï¼Œèƒ½åˆå¹¶å°±åˆå¹¶</strong>ã€‚
å› ä¸ºæ¯ä¸€è¡ŒæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ª layerï¼Œlayer è¶Šå¤šï¼Œä½œæˆçš„é•œåƒè¶Šå¤§</em>
<em>æˆ‘è¿™é‡Œåˆ†å¼€è¿™ä¹ˆå¤šå†™æ˜¯å› ä¸ºç¼–å†™è¯¥é•œåƒè¿‡ç¨‹ä¸­ï¼Œ<code>init_env1.sh</code> æ›´æ–°æºã€å®‰è£…è½¯ä»¶å¤ªè€—æ—¶é—´ã€‚
ä¸” <code>init_env2.sh</code> æœ‰å¤šæ¬¡ä¿®æ”¹ï¼Œè€Œ <code>init_env1.sh</code> æ²¡æ€ä¹ˆä¿®æ”¹è¿‡ï¼Œä¸ºäº†èŠ‚çº¦é•œåƒæ‰“åŒ…çš„æ—¶é—´ä¸“é—¨åˆ†å¼€å¤„ç†ã€‚</em></p><h3 id=dockerfile-éœ€è¦ç”¨åˆ°çš„è„šæœ¬>Dockerfile éœ€è¦ç”¨åˆ°çš„è„šæœ¬</h3><h4 id=init_env1sh>init_env1.sh</h4><p>ç”¨äºå®‰è£…ä¹‹åå¯èƒ½ç”¨åˆ°çš„ç›¸å…³è½¯ä»¶ï¼Œå› ä¸º TensorFlow æä¾›çš„é•œåƒå¹¶æ²¡æœ‰è¿™äº›ã€‚
å¯æ ¹æ®éœ€è¦ä¿®æ”¹ã€æ·»åŠ å…¶ä»–è½¯ä»¶ã€‚</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell><span class=ln>1</span>cp /sources.list /etc/apt/sources.list
<span class=ln>2</span>rm -Rf /var/lib/apt/lists/* 
<span class=ln>3</span><span class=c1># æ›´æ–°æºå’Œè½¯ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦ç¦æ­¢ CUDA çš„æ›´æ–°ï¼ˆä¸ç„¶è¦è¿™ TensorFlow çš„é•œåƒæœ‰ä½•ç”¨ï¼‰</span>
<span class=ln>4</span>apt-mark hold cuda*
<span class=ln>5</span>apt-mark hold machine-learning
<span class=ln>6</span>apt-get update 
<span class=ln>7</span><span class=c1># å®‰è£…æ‰€éœ€è½¯ä»¶</span>
<span class=ln>8</span>apt-get -y install openssh-server openssh-sftp-server vim sudo net-tools
</code></pre></div><h4 id=init_env2sh>init_env2.sh</h4><p>ç”¨äºè®¾ç½® SSH ä»¥åŠç™»å½•ç”¨æˆ·</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell><span class=ln> 1</span><span class=nv>config_file</span><span class=o>=</span><span class=s2>&#34;/etc/ssh/sshd_config&#34;</span>
<span class=ln> 2</span><span class=nv>sftp_server</span><span class=o>=</span><span class=s2>&#34;/usr/lib/openssh/sftp-server&#34;</span>
<span class=ln> 3</span>
<span class=ln> 4</span><span class=c1># modify configs start</span>
<span class=ln> 5</span><span class=c1># ç¦æ­¢ root ç”¨æˆ·é€šè¿‡ ssh ç™»å½•</span>
<span class=ln> 6</span><span class=k>if</span> grep -q <span class=s2>&#34;^PermitRootLogin&#34;</span> <span class=nv>$config_file</span><span class=p>;</span><span class=k>then</span>
<span class=ln> 7</span>   sed -i <span class=s1>&#39;/^PermitRootLogin/s/yes/no/&#39;</span> <span class=nv>$config_file</span>
<span class=ln> 8</span><span class=k>else</span>
<span class=ln> 9</span>   sed -i <span class=s1>&#39;$a PermitRootLogin no&#39;</span> <span class=nv>$config_file</span>
<span class=ln>10</span><span class=k>fi</span>
<span class=ln>11</span>
<span class=ln>12</span><span class=c1># è¿™é‡Œè®¾ç½®æ˜¯ä¸ºäº†è®© WinSCP ç­‰å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ sftp è¿æ¥å®¹å™¨</span>
<span class=ln>13</span><span class=k>if</span> grep -q <span class=s2>&#34;^Subsystem&#34;</span> <span class=nv>$config_file</span><span class=p>;</span><span class=k>then</span>
<span class=ln>14</span>   sed -i <span class=s1>&#39;/^Subsystem/s/$sftp_server/internal-sftp/&#39;</span> <span class=nv>$config_file</span>
<span class=ln>15</span><span class=k>else</span>
<span class=ln>16</span>   sed -i <span class=s1>&#39;$a Subsystem  sftp  internal-sftp&#39;</span> <span class=nv>$config_file</span>
<span class=ln>17</span><span class=k>fi</span>
<span class=ln>18</span><span class=c1># modify configs end</span>
<span class=ln>19</span>
<span class=ln>20</span><span class=c1># æ·»åŠ ç”¨æˆ·:aiï¼Œè®¾ç½®ç”¨æˆ·ç›®å½•:/AIï¼Œä¿®æ”¹å¯†ç :123456</span>
<span class=ln>21</span><span class=c1># æ³¨æ„äº†è§£ `useradd` å’Œ `adduser` çš„åŒºåˆ«</span>
<span class=ln>22</span>useradd -d /AI -U -m ai <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;ai:123456&#34;</span> <span class=p>|</span> chpasswd
<span class=ln>23</span><span class=c1># ä¸º ai ç”¨æˆ·è®¾ç½® sudo æƒé™</span>
<span class=ln>24</span>sed -i <span class=s1>&#39;$a ai   ALL=(ALL) NOPASSWD: ALL&#39;</span> /etc/sudoers
</code></pre></div><p><em><strong>Note:</strong> ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ root ç”¨æˆ·ï¼Ÿå› ä¸ºå³ä½¿æ˜¯åœ¨ Docker å®¹å™¨é‡Œï¼Œç›´æ¥ä½¿ç”¨ root ç”¨æˆ·ä¹Ÿæ˜¯å­˜åœ¨å®‰å…¨éšæ‚£çš„ï¼Œ
å¦‚æœå®¹å™¨æŒ‚è½½äº†å®¿ä¸»æœºçš„ç›®å½•ï¼Œé‚£ä¹ˆåœ¨å®¹å™¨å†…ä½¿ç”¨ root ç”¨æˆ·æ“ä½œæŒ‚è½½ç›®å½•å®é™…ä¸Šå’Œåœ¨å®¿ä¸»æœºä½¿ç”¨ root ç”¨æˆ·æ“ä½œè¯¥ç›®å½•æ˜¯ä¸€æ ·ã€‚
å°±è¿ TensorFlow çš„å®¹å™¨ä¹Ÿä¼šåœ¨ä½ è¿›å…¥å®¹å™¨æ—¶åˆ¤æ–­å½“å‰ç”¨æˆ·çš„èº«ä»½ï¼Œå¦‚æœæ˜¯ root åˆ™ä¼šå»ºè®®ä½ ä½¿ç”¨é root ç”¨æˆ·</em></p><h4 id=sourceslist>sources.list</h4><p>è½¯ä»¶æºè®¾ç½®ï¼Œè¿™é‡Œç”¨çš„é˜¿é‡Œäº‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ›¿æ¢æˆåˆ«çš„æºã€‚</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text><span class=ln> 1</span>deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
<span class=ln> 2</span>deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
<span class=ln> 3</span>deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
<span class=ln> 4</span>deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
<span class=ln> 5</span>deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
<span class=ln> 6</span>deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
<span class=ln> 7</span>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
<span class=ln> 8</span>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
<span class=ln> 9</span>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
<span class=ln>10</span>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</code></pre></div><h3 id=æ‰“åŒ…é•œåƒ>æ‰“åŒ…é•œåƒ</h3><p>åœ¨ Dockerfile æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>docker build . -t tf:1.15.5
</code></pre></div><h3 id=æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</h3><p>é€šè¿‡ä»¥ä¸‹ Docker å‘½ä»¤å°±å¯ä»¥å¯åŠ¨æ”¯æŒ GPU çš„å®¹å™¨</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>docker run -it --name tf1 --gpus all -p 10022:22 -v /home/ai/tf_project:/AI tf:1.15.5
</code></pre></div><p>å¦‚æœåªéœ€è¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ/ä¸€ä¸ªç‰ˆæœ¬çš„ TensorFlowï¼Œåˆ°è¿™é‡Œå°±å·²ç»è¶³å¤Ÿäº†ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚
æ¥ä¸‹æ¥ç»§ç»­è®²éªšæ“ä½œï¼ŒæŠ€å·§å…¶å®å¾ˆç®€å•ï¼šæ´»ç”¨ <code>VOLUME</code> æŒ‚è½½ç›®å½•ã€‚</p><h3 id=å®‰è£…-minicondaanaconda>å®‰è£… Miniconda/Anaconda</h3><p>conda å®‰è£…å¾ˆç®€å•ï¼Œä»<a href=https://docs.conda.io/en/master/miniconda.html>å®˜ç½‘</a>ä¸‹è½½å¯¹åº”è„šæœ¬ï¼Œ
æ·»åŠ å¯æ‰§è¡Œæƒé™åæ‰§è¡Œï¼ŒæŒ‰ç…§äº¤äº’æç¤ºæ“ä½œå°±è¡Œï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h3 id=ä½¿ç”¨-docker-compose-ç®¡ç†å®¹å™¨>ä½¿ç”¨ Docker-Compose ç®¡ç†å®¹å™¨</h3><p>â€» å‡è®¾è£…å¥½çš„ Miniconda æ‰€åœ¨æ ¹ç›®å½•ä¸º <code>/home/ai/miniconda</code></p><ol><li>åˆ›å»ºä»»æ„ç›®å½•ä½œä¸ºé¡¹ç›®ç›®å½•ï¼Œæ¯”å¦‚ <code>/home/ai/ai_docker</code></li><li>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>docker-compose.yml</code>ï¼Œå’Œ <code>Dockerfile</code> ä¸€æ ·ï¼Œæ–‡ä»¶åå›ºå®š</li></ol><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=ln> 1</span><span class=c># ç”±äºå¤§å¤šæ•°éƒ½æ˜¯ Docker æŒ‡ä»¤ä¸­èƒ½çœ‹åˆ°çš„ï¼ŒåŠŸèƒ½ç›¸åŒï¼Œä¸‹é¢åªä¼šå¯¹ä¸€äº›ç‰¹æ®Šçš„æŒ‡ä»¤åšè§£é‡Šã€‚</span><span class=w>
</span><span class=ln> 2</span><span class=w></span><span class=c># æ³¨æ„è¿™æ˜¯æœ¬æ–‡ä»¶ä½¿ç”¨çš„ Docker-Compose ç‰ˆæœ¬ï¼Œå†³å®šä½ èƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨å“ªäº›æŒ‡ä»¤</span><span class=w>
</span><span class=ln> 3</span><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;3.9&#34;</span><span class=w>
</span><span class=ln> 4</span><span class=w>
</span><span class=ln> 5</span><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span><span class=ln> 6</span><span class=w>  </span><span class=c># æœåŠ¡åï¼Œéšæ„</span><span class=w>
</span><span class=ln> 7</span><span class=w>  </span><span class=nt>tensorflow1</span><span class=p>:</span><span class=w>
</span><span class=ln> 8</span><span class=w>    </span><span class=c># æŒ‡å®šé•œåƒ</span><span class=w>
</span><span class=ln> 9</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>tf:1.15.5</span><span class=w>
</span><span class=ln>10</span><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>tf1</span><span class=w>
</span><span class=ln>11</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=ln>12</span><span class=w>      </span>- <span class=s2>&#34;10022:22&#34;</span><span class=w>
</span><span class=ln>13</span><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span><span class=ln>14</span><span class=w>    </span><span class=c># æŒ‡å®šç”¨æˆ·ï¼Œåœ¨ä¸‹ä¸€èŠ‚ç¯å¢ƒå˜é‡é…ç½®</span><span class=w>
</span><span class=ln>15</span><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>${CURRENT_UID}</span><span class=w>
</span><span class=ln>16</span><span class=w>    </span><span class=c># ä½¿å®¹å™¨ä¿æŒåå°è¿è¡Œ</span><span class=w>
</span><span class=ln>17</span><span class=w>    </span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=ln>18</span><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span><span class=ln>19</span><span class=w>      </span>- <span class=l>ai-bridge</span><span class=w>
</span><span class=ln>20</span><span class=w>    </span><span class=c># ä½¿å®¹å™¨èƒ½ä½¿ç”¨ GPU</span><span class=w>
</span><span class=ln>21</span><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span><span class=ln>22</span><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span><span class=ln>23</span><span class=w>        </span><span class=nt>reservations</span><span class=p>:</span><span class=w>
</span><span class=ln>24</span><span class=w>          </span><span class=nt>devices</span><span class=p>:</span><span class=w>
</span><span class=ln>25</span><span class=w>          </span>- <span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>nvidia</span><span class=w>
</span><span class=ln>26</span><span class=w>            </span><span class=nt>capabilities</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>gpu]</span><span class=w>
</span><span class=ln>27</span><span class=w>    </span><span class=c># ç›®å½•æŒ‚è½½ï¼Œéªšçš„æ ¹æº</span><span class=w>
</span><span class=ln>28</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=ln>29</span><span class=w>      </span><span class=c># å¯ä»¥ç›´æ¥å°†åŸæ¥çš„ç”¨æˆ·ç›®å½•å…ˆæŒ‚è½½è¿‡æ¥ï¼Œæˆæƒ ro</span><span class=w>
</span><span class=ln>30</span><span class=w>      </span><span class=c># ç›®çš„ï¼šå¦‚æœæœ‰éœ€è¦å’Œå®¹å™¨ç¯å¢ƒä¸€èµ·ä½¿ç”¨ä½†ä¸ä¾èµ– TensorFlow ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œå¦‚ï¼šä¸ªåˆ«åˆ†è¯å™¨ï¼Œ</span><span class=w>
</span><span class=ln>31</span><span class=w>      </span><span class=c># ç›´æ¥è£…åœ¨å®¿ä¸»æœºå³å¯ï¼Œå®¹å™¨å†…åªéœ€è¦é…ç½®ç¯å¢ƒå˜é‡</span><span class=w>
</span><span class=ln>32</span><span class=w>      </span>- <span class=l>/home/ai:/home/ai:ro</span><span class=w>
</span><span class=ln>33</span><span class=w>      </span><span class=c># å°†å®¿ä¸»æœºçš„ Miniconda ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„åŒç­‰ç›®å½•ä¸‹ï¼Œæˆæƒ rw</span><span class=w>
</span><span class=ln>34</span><span class=w>      </span><span class=c># ç›®çš„ï¼šå…±äº«å®¿ä¸»æœºçš„ conda ç¯å¢ƒï¼Œä¸åŒé¡¹ç›®åªè¦ä¾èµ–çš„ TensorFlow ç‰ˆæœ¬ç›¸åŒï¼Œ</span><span class=w>
</span><span class=ln>35</span><span class=w>      </span><span class=c># å°±åªéœ€è¦åˆ›å»º conda ç¯å¢ƒå…‹éš†å·²æœ‰ç¯å¢ƒçš„ TensorFlowï¼Œåœ¨æ–°ç¯å¢ƒè£…é¡¹ç›®ä¾èµ–å³å¯ã€‚</span><span class=w>
</span><span class=ln>36</span><span class=w>      </span><span class=c># </span><span class=w>
</span><span class=ln>37</span><span class=w>      </span><span class=c># æ­¤å¤–ï¼Œè¿œç¨‹å¼€å‘ç”šè‡³å¯ä»¥ä¸ä¸ºä»»ä½•å®¹å™¨åˆ†é…ç«¯å£æ˜ å°„ï¼Œé…åˆä¸‹ä¸€æ¡æŒ‚è½½é¡¹ï¼Œç›´æ¥è¿æ¥å®¿ä¸»æœºçš„é¡¹ç›®</span><span class=w>
</span><span class=ln>38</span><span class=w>      </span><span class=c># å’Œ conda ç¯å¢ƒå³å¯ã€‚å½“ç„¶ï¼Œå¦‚æœæ²¡ä»€ä¹ˆæ„å¤–ï¼Œå‰é¢å®‰è£… SSH ç­‰è½¯ä»¶çš„æ­¥éª¤éƒ½å¯ä»¥çœå»ã€‚</span><span class=w>
</span><span class=ln>39</span><span class=w>      </span>- <span class=l>/home/ai/miniconda3:/home/ai/miniconda3:rw</span><span class=w>
</span><span class=ln>40</span><span class=w>      </span><span class=c># å°†é¡¹ç›®ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„é»˜è®¤å·¥ä½œç›®å½•ï¼ŒåŒæ—¶è¿™é‡Œä¹Ÿæ˜¯å‰é¢æŒ‡å®šçš„ã€å®¹å™¨é‡Œçš„ç”¨æˆ·ç›®å½•ã€‚</span><span class=w>
</span><span class=ln>41</span><span class=w>      </span>- <span class=l>/home/ai/tensorflow_volume:/AI</span><span class=w>
</span><span class=ln>42</span><span class=w>
</span><span class=ln>43</span><span class=w>  </span><span class=c># ä¸ä¸Šä¸€èŠ‚ä»…æœåŠ¡åã€é•œåƒã€ç«¯å£æ˜ å°„ä¸åŒï¼Œå…¶ä»–ä¸€è‡´ã€‚æ·»åŠ æ–°å®¹å™¨æ—¶ä¹Ÿä¸€æ ·</span><span class=w>
</span><span class=ln>44</span><span class=w>  </span><span class=nt>tensorflow2</span><span class=p>:</span><span class=w>
</span><span class=ln>45</span><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>tf:latest</span><span class=w>
</span><span class=ln>46</span><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>tf2</span><span class=w>
</span><span class=ln>47</span><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=ln>48</span><span class=w>      </span>- <span class=s2>&#34;20022:22&#34;</span><span class=w>
</span><span class=ln>49</span><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span><span class=ln>50</span><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>${CURRENT_UID}</span><span class=w>
</span><span class=ln>51</span><span class=w>    </span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=ln>52</span><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span><span class=ln>53</span><span class=w>      </span>- <span class=l>ai-bridge</span><span class=w>
</span><span class=ln>54</span><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span><span class=ln>55</span><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span><span class=ln>56</span><span class=w>        </span><span class=nt>reservations</span><span class=p>:</span><span class=w>
</span><span class=ln>57</span><span class=w>          </span><span class=nt>devices</span><span class=p>:</span><span class=w>
</span><span class=ln>58</span><span class=w>          </span>- <span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>nvidia</span><span class=w>
</span><span class=ln>59</span><span class=w>            </span><span class=nt>capabilities</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>gpu]</span><span class=w>
</span><span class=ln>60</span><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span><span class=ln>61</span><span class=w>      </span>- <span class=l>/home/ai:/home/ai:ro</span><span class=w>
</span><span class=ln>62</span><span class=w>      </span>- <span class=l>/home/ai/miniconda3:/home/ai/miniconda3:rw</span><span class=w>
</span><span class=ln>63</span><span class=w>      </span>- <span class=l>/home/ai/tensorflow_volume:/AI</span><span class=w>
</span><span class=ln>64</span><span class=w>
</span><span class=ln>65</span><span class=w></span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span><span class=ln>66</span><span class=w>  </span><span class=nt>ai-bridge</span><span class=p>:</span><span class=w>
</span><span class=ln>67</span><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>bridge</span><span class=w>
</span></code></pre></div><ol start=3><li>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>.env</code></li></ol><div class=highlight><pre class=chroma><code class=language-ini data-lang=ini><span class=ln>1</span><span class=na>å†™å…¥å½“å‰ç”¨æˆ·çš„ uid å’Œ gid</span>
<span class=ln>2</span><span class=na>CURRENT_UID</span><span class=o>=</span><span class=s>1000:1000</span>
</code></pre></div><p><em><strong>Note:</strong> å¦‚ä½•æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ idï¼Ÿæ‰§è¡Œ <code>id -u</code> å’Œ <code>id -g</code> å°±å¥½äº†</em></p><ol start=4><li>å¯åŠ¨å®¹å™¨</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span><span class=nb>cd</span> /home/ai/ai_docker
<span class=ln>2</span>docker-compose up -d
</code></pre></div><p>ä½¿ç”¨ <code>docker-compose ps</code> æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼Œæ˜¯ <code>Up</code> å°±å¯åŠ¨æˆåŠŸäº†ã€‚</p><h2 id=éªšæ“ä½œçš„åç»­è¡¥å……>éªšæ“ä½œçš„åç»­è¡¥å……</h2><h3 id=ä¸ºå®¹å™¨åˆå§‹åŒ–-conda>ä¸ºå®¹å™¨åˆå§‹åŒ– conda</h3><p>è™½ç„¶å®Œå…¨å¯ä»¥è¿›å…¥å®¹å™¨åå†æ¿€æ´»å¯¹åº”çš„ conda ç¯å¢ƒï¼Œä½†ç”¨å¾—ä¹…äº†ç€å®æ„Ÿè§‰ç¹çã€‚
å¯ä»¥é€šè¿‡ç”¨æˆ·ç™»å½•ä¼šè‡ªåŠ¨è°ƒç”¨ <code>.bashrc</code> æˆ– <code>.profile</code> ç­‰è„šæœ¬çš„æœºåˆ¶æ¥å®ç°ã€‚</p><ol><li>å…³é—­ conda çš„è‡ªåŠ¨åˆå§‹åŒ–ç¯å¢ƒ
å› ä¸ºä¸Šé¢é…ç½®äº†å®¹å™¨çš„ conda ç¯å¢ƒå®é™…ä¸Šæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨çš„ï¼Œä¸ºäº†é¿å…ç™»å½•è„šæœ¬æ¿€æ´»å®¹å™¨å conda åˆåˆ‡æ¢å›é»˜è®¤ç¯å¢ƒï¼Œé¦–å…ˆå…³é—­è¯¥è®¾ç½®</li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>cat <span class=s>&lt;&lt;EOF &gt;&gt;~/.condarc
</span><span class=ln>2</span><span class=s>auto_activate_base: false
</span><span class=ln>3</span><span class=s>EOF</span>
</code></pre></div><ol start=2><li>ä¿®æ”¹å®¿ä¸»æœº <code>.bashrc</code>ï¼Œæ·»åŠ ç¯å¢ƒåˆ‡æ¢å‡½æ•°
å®‰è£… conda (å¹¶å¯ç”¨è‡ªåŠ¨åˆå§‹åŒ–)åï¼Œåœ¨å®¿ä¸»æœºçš„ <code>.bashrc</code> æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä»£ç </li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln> 1</span><span class=c1># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span>
<span class=ln> 2</span><span class=c1># !! Contents within this block are managed by &#39;conda init&#39; !!</span>
<span class=ln> 3</span><span class=nv>__conda_setup</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span><span class=s1>&#39;/home/ai/miniconda3/bin/conda&#39;</span> <span class=s1>&#39;shell.bash&#39;</span> <span class=s1>&#39;hook&#39;</span> 2&gt; /dev/null<span class=k>)</span><span class=s2>&#34;</span>
<span class=ln> 4</span><span class=k>if</span> <span class=o>[</span> <span class=nv>$?</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln> 5</span>    <span class=nb>eval</span> <span class=s2>&#34;</span><span class=nv>$__conda_setup</span><span class=s2>&#34;</span>
<span class=ln> 6</span><span class=k>else</span>
<span class=ln> 7</span>    <span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;/home/ai/miniconda3/etc/profile.d/conda.sh&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln> 8</span>        . <span class=s2>&#34;/home/ai/miniconda3/etc/profile.d/conda.sh&#34;</span>
<span class=ln> 9</span>    <span class=k>else</span>
<span class=ln>10</span>        <span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=s2>&#34;/home/ai/miniconda3/bin:</span><span class=nv>$PATH</span><span class=s2>&#34;</span>
<span class=ln>11</span>    <span class=k>fi</span>
<span class=ln>12</span><span class=k>fi</span>
<span class=ln>13</span><span class=nb>unset</span> __conda_setup
<span class=ln>14</span><span class=c1># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span>
</code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç ä¹‹åæ·»åŠ </p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln> 1</span>tf1<span class=o>(){</span>
<span class=ln> 2</span>  <span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln> 3</span>    <span class=nv>env</span><span class=o>=</span>tf1
<span class=ln> 4</span>  <span class=k>else</span>
<span class=ln> 5</span>    <span class=nv>env</span><span class=o>=</span><span class=nv>$1</span>
<span class=ln> 6</span>  <span class=k>fi</span>
<span class=ln> 7</span>  docker <span class=nb>exec</span> -it -e <span class=nv>env</span><span class=o>=</span><span class=nv>$1</span> -e <span class=nv>TF_VERSION</span><span class=o>=</span>TensorFlow1 tf1 bash
<span class=ln> 8</span><span class=o>}</span>
<span class=ln> 9</span>tf2<span class=o>(){</span>
<span class=ln>10</span>  <span class=k>if</span> <span class=o>[</span> -z <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln>11</span>    <span class=nv>env</span><span class=o>=</span>tf2
<span class=ln>12</span>  <span class=k>else</span>
<span class=ln>13</span>    <span class=nv>env</span><span class=o>=</span><span class=nv>$1</span>
<span class=ln>14</span>  <span class=k>fi</span>
<span class=ln>15</span>  docker <span class=nb>exec</span> -it -e <span class=nv>env</span><span class=o>=</span><span class=nv>$1</span> -e <span class=nv>TF_VERSION</span><span class=o>=</span>TensorFlow2 tf2 bash
<span class=ln>16</span><span class=o>}</span>
</code></pre></div><ol start=3><li>é…ç½®å®¿ä¸»æœºé»˜è®¤ conda ç¯å¢ƒ
åœ¨å®¿ä¸»æœº <code>.bashrc</code> æœ€åæ·»åŠ </li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln>1</span>conda activate base
</code></pre></div><ol start=4><li>åœ¨å®¹å™¨ <code>.bashrc</code> æ·»åŠ </li></ol><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh><span class=ln> 1</span><span class=c1># &gt;&gt;&gt; auto activate env &gt;&gt;&gt;</span>
<span class=ln> 2</span><span class=k>if</span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=nv>$env</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln> 3</span>  conda activate <span class=nv>$env</span>  <span class=c1># è¿›å…¥å®¹å™¨è‡ªåŠ¨æ¿€æ´»æŒ‡å®šçš„ conda ç¯å¢ƒ </span>
<span class=ln> 4</span><span class=k>else</span>
<span class=ln> 5</span>  <span class=c1># å¦‚æœæ²¡æœ‰æŒ‡å®š conda ç¯å¢ƒï¼Œåˆ™è‡ªåŠ¨è¿›å…¥å®¹å™¨è‡ªèº« tf ç‰ˆæœ¬å¯¹åº”çš„ conda ç¯å¢ƒ</span>
<span class=ln> 6</span>  <span class=nv>tf1</span><span class=o>=</span><span class=sb>`</span>pip freeze <span class=p>|</span> grep tensorflow-gpu<span class=o>==</span>1.15.5<span class=sb>`</span>  <span class=c1># æŸ¥è¯¢å½“å‰å®¹å™¨é»˜è®¤ç¯å¢ƒçš„ tf1 ç‰ˆæœ¬ï¼Œ1.15.5 ä¿®æ”¹æˆè‡ªå·±å®‰è£…çš„ç‰ˆæœ¬</span>
<span class=ln> 7</span>  <span class=nv>tf2</span><span class=o>=</span><span class=sb>`</span>pip freeze <span class=p>|</span> grep tensorflow-gpu<span class=o>==</span>2.1.0<span class=sb>`</span>  <span class=c1># æŸ¥è¯¢å½“å‰å®¹å™¨é»˜è®¤ç¯å¢ƒçš„ tf1 ç‰ˆæœ¬ï¼Œ2.1.0 ä¿®æ”¹æˆè‡ªå·±å®‰è£…çš„ç‰ˆæœ¬</span>
<span class=ln> 8</span>  <span class=k>if</span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=nv>$tf1</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln> 9</span>    conda activate tf1
<span class=ln>10</span>  <span class=k>elif</span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=nv>$tf2</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
<span class=ln>11</span>    conda activate tf2
<span class=ln>12</span>  <span class=k>fi</span>
<span class=ln>13</span><span class=k>fi</span>
<span class=ln>14</span><span class=c1># &lt;&lt;&lt; auto activate env &lt;&lt;&lt;</span>
</code></pre></div><p>è‡³æ­¤ï¼Œé€šè¿‡ <code>tf1</code> å’Œ <code>tf2</code> å°±èƒ½ç›´æ¥è¿›å…¥å®¹å™¨å¹¶æ¿€æ´»ç›¸å¯¹çš„ conda ç¯å¢ƒäº†ã€‚
ä¸¾ä¸ªä¾‹å­ï¼š</p><ul><li>è¿›å…¥ TensorFlow1 å®¹å™¨ï¼š<code>tf1</code></li><li>è¿›å…¥ TensorFlow2 å®¹å™¨ï¼š<code>tf2</code></li><li>è¿›å…¥ TensorFlow1 å®¹å™¨ï¼Œå¹¶æ¿€æ´»åä¸º <code>BERT</code> çš„è™šæ‹Ÿç¯å¢ƒï¼š<code>tf1 BERT</code></li><li>è¿›å…¥ TensorFlow2 å®¹å™¨ï¼Œå¹¶æ¿€æ´»åä¸º <code>T5</code> çš„è™šæ‹Ÿç¯å¢ƒï¼š<code>tf1 T5</code></li></ul><h3 id=ç®€å•çš„ä½¿ç”¨è¯´æ˜>ç®€å•çš„ä½¿ç”¨è¯´æ˜</h3><p>TODO</p><h3 id=ä½¿ç”¨-vscode-è¿œç¨‹å¼€å‘>ä½¿ç”¨ VSCode è¿œç¨‹å¼€å‘</h3><p>å®‰è£…æ’ä»¶ <code>Remote - SSH</code> è¿æ¥å®¿ä¸»æœºå³å¯ï¼Œå³ä½¿ä¸æŸ¥èµ„æ–™ä¹Ÿä¸éš¾æ“ä½œã€‚
ç”±äºå†™æœ¬æ–‡çš„æ—¶é—´å·²ç»å¤ªæ™šäº†è€Œä¸”è¿™ä¸€èŠ‚ä¸ç®—é‡ç‚¹ï¼Œæš‚ä¸”å‘Šä¸€æ®µè½äº†ã€‚ã€‚ã€‚</p><h2 id=ä¸€äº›å·²çŸ¥å­˜åœ¨ä½†ä»ä¸çŸ¥å¦‚ä½•è§£å†³çš„å°é—®é¢˜>ä¸€äº›å·²çŸ¥å­˜åœ¨ä½†ä»ä¸çŸ¥å¦‚ä½•è§£å†³çš„å°é—®é¢˜</h2><p>TODO</p><div class=post-ref><h2 id=å‚è€ƒé“¾æ¥>å‚è€ƒé“¾æ¥</h2><ul><li><a href=https://docs.docker.com/engine/install/>Install Docker Engine | Docker Documentation</a></li><li><a href=https://docs.docker.com/compose/install/>Install Docker Compose | Docker Documentation</a></li><li><a href=https://www.tensorflow.org/install/docker>Docker | TensorFlow</a></li></ul></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>niceRAM</span></p><p class=copyright-item><span>Link:</span>
<a href=https://niceram.xyz/2021/04/15/20210415_2157/>https://niceram.xyz/2021/04/15/20210415_2157/</a></p><p class="copyright-item lincese">æœ¬æ–‡é‡‡ç”¨<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://niceram.xyz/tags/docker/>#docker</a></span>
<span class=tag><a href=https://niceram.xyz/tags/miniconda/>#miniconda</a></span>
<span class=tag><a href=https://niceram.xyz/tags/anaconda/>#anaconda</a></span>
<span class=tag><a href=https://niceram.xyz/tags/tensorflow/>#tensorflow</a></span>
<span class=tag><a href=https://niceram.xyz/tags/tensorflow-gpu/>#tensorflow-gpu</a></span>
<span class=tag><a href=https://niceram.xyz/tags/ubuntu/>#ubuntu</a></span>
<span class=tag><a href=https://niceram.xyz/tags/nvidia/>#Nvidia</a></span>
<span class=tag><a href=https://niceram.xyz/tags/cuda/>#CUDA</a></span>
<span class=tag><a href=https://niceram.xyz/tags/cudnn/>#cudnn</a></span>
<span class=tag><a href=https://niceram.xyz/tags/cuda-%E5%A4%9A%E7%89%88%E6%9C%AC%E5%85%B1%E5%AD%98/>#CUDA å¤šç‰ˆæœ¬å…±å­˜</a></span></section><section><a href=javascript:window.history.back();>back</a></span> Â·
<span><a href=https://niceram.xyz/>home</a></span></section></div><div class=post-nav><a href=https://niceram.xyz/2021/03/25/20210325_1319/ class=prev rel=prev title="ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºÂ·éƒ¨ç½²é™æ€ç½‘ç«™åˆ° GitHub Pages"><i class="iconfont icon-left"></i>&nbsp;ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºÂ·éƒ¨ç½²é™æ€ç½‘ç«™åˆ° GitHub Pages</a>
<a href=https://niceram.xyz/2021/07/07/20210707_1441/ class=next rel=next title="Angular è·å–åŸç”Ÿ DOM å¯¹è±¡æ—¶å‡ºç° 'undefined'">Angular è·å–åŸç”Ÿ DOM å¯¹è±¡æ—¶å‡ºç° 'undefined'&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-social><div class=social-links><style type=text/css>@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.eot);src:url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.eot?#iefix)format('embedded-opentype'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.woff2)format('woff2'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.woff)format('woff'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.ttf)format('truetype'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.svg#iconfont)format('svg')}</style><a href="https://space.bilibili.com/10929768/channel/detail?cid=12977" target=_blank rel="me noopener"><i class="iconfont icon-bilibili"></i></a><a href=https://github.com/niceRAM target=_blank rel="me noopener"><i class="iconfont icon-github"></i></a><a href=https://twitter.com/niceRAM95 target=_blank rel="me noopener"><i class="iconfont icon-twitter"></i></a><a href=mailto:niceniceram@gmail.com rel="me noopener"><i class="iconfont icon-mail01"></i></a><a href=https://t.me/niceRAM target=_blank rel="me noopener"><i class="iconfont icon-telegram"></i></a></div></div><div class=post-comment><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.bootcss.com/gitalk/1.5.2/gitalk.css><script src=https://cdn.bootcss.com/gitalk/1.5.2/gitalk.min.js></script><script>const gitalk=new Gitalk({clientID:'e2ac76297f1e7ec232f9',clientSecret:'4385d32dd8c6ab5f97856bbe2e04a1e05a237276',repo:'blog-comments',owner:'niceRAM',admin:['niceRAM'],proxy:'https://cors-anywhere-niceblog.herokuapp.com/https://github.com/login/oauth/access_token',id:location.pathname,distractionFreeMode:!1});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return}gitalk.render('gitalk-container')})()</script></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2018 - 2021</span>
<span class=rotating>ğŸŒ¸</span>
<span class=author itemprop=copyrightHolder><a href=https://niceram.xyz/>niceRAM</a> |</span>
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/niceRAM/nicesima target=_blank rel="external nofollow">nicesima</a></span></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script><script defer src=/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage()</script></div></body></html>